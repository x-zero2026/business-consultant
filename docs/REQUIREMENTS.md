# Business Consultant - 需求文档

## 项目概述

为一人公司创业者提供AI驱动的商业咨询服务，通过多轮对话了解用户需求，生成个性化的资源配置建议。

## 目标用户

- 一人公司创业者
- 小型团队负责人
- 独立开发者/设计师/内容创作者

## 核心功能

### 1. AI 对话咨询

**流程**:
1. 用户输入商业目标（如：跨境电商、SaaS产品）
2. AI 询问3-5个关键细节问题
3. AI 基于收集的信息生成推荐方案

**技术实现**:
- 使用 DeepSeek Chat API
- 前端维护完整对话历史
- 每次请求带上完整 conversation history
- 本地存储对话记录（localStorage）

### 2. 智能推荐生成

**推荐内容包含**:
- **AI工作流**: 可以用AI自动化的任务
  - 名称、描述
  - 输入/输出要求
  - 所需工具
  - 预估成本（XZT）
  - 复杂度、优先级
  
- **真人岗位**: 需要招募的人员
  - 职位名称
  - 职责列表
  - 技能要求
  - 工作时间
  - 月度预算（XZT）
  - 试用期考核标准
  
- **分阶段预算**: 启动期、成长期、稳定期
  - 阶段名称、时长
  - 月度预算
  - 预算明细（AI工具、人力、营销等）
  - 里程碑目标

### 3. 报告管理

**功能**:
- 保存推荐报告到数据库
- 查看历史报告列表
- 查看报告详情
- 导出报告（TXT格式）
- 删除报告

**数据结构**:
```json
{
  "report_id": "uuid",
  "user_did": "0x...",
  "project_id": "uuid",
  "business_goal": "跨境电商",
  "created_at": "2026-01-29",
  "recommendations": {
    "ai_workflows": [...],
    "human_roles": [...],
    "phases": [...]
  }
}
```

### 4. 任务发布集成

**流程**:
1. 用户在报告详情页选择某个推荐项
2. 点击"发布任务"按钮
3. 系统创建任务草稿（task_draft）
4. 打开新标签页跳转到 task-ui
5. task-ui 读取草稿，预填表单
6. 用户确认后发布任务
7. 用户回到 business-consultant，刷新状态
8. 系统查询 task-ui API，更新发布状态

**状态管理**:
- `null`: 未发布
- `"draft_created"`: 已创建草稿
- `"published"`: 已发布到 task-ui

### 5. 项目关联

**功能**:
- 页面顶部显示项目选择器
- 对话和报告都关联到选中的项目
- 发布任务时自动选择对应项目
- 报告列表按项目分组显示

## 用户流程

### 主流程

```
1. 用户登录 X-Zero 系统（DID 登录）
2. 选择项目
3. 开始对话或继续上次对话
4. AI 询问商业目标
5. AI 询问细节问题（3-5轮）
6. AI 生成推荐方案
7. 用户查看推荐
8. 用户保存报告
9. 用户在报告详情页发布任务
10. 跳转到 task-ui 完成发布
```

### 继续对话 vs 开启新对话

- 用户打开页面时，自动加载最近会话
- 顶部显示"继续上次对话"提示
- 提供"开启新对话"按钮
- 本地存储最近一次会话缓存

## 非功能需求

### 性能要求
- AI 响应时间 < 10秒
- 页面加载时间 < 2秒
- 支持 100+ 并发用户

### 安全要求
- 必须登录才能使用
- JWT token 验证
- 防止 API 滥用（rate limiting）
- 敏感数据加密存储

### 可用性要求
- 移动端适配
- 支持主流浏览器（Chrome, Safari, Firefox）
- 错误提示友好
- 加载状态明确

## 技术约束

- 前端: React 18 + Vite
- 后端: Go + AWS Lambda
- 数据库: PostgreSQL (Supabase)
- AI: DeepSeek Chat API
- 部署: AWS Amplify + API Gateway

## 成本估算

- DeepSeek API: ~$0.0002 / 次对话
- AWS Lambda: 免费额度内
- Supabase: 免费额度内
- 总成本: < $10 / 月（1000次对话）

## 里程碑

### Phase 1: 核心对话功能 (3天)
- 对话界面
- DeepSeek API 集成
- 本地存储

### Phase 2: 报告管理 (2天)
- 保存报告
- 报告列表
- 报告详情

### Phase 3: 任务发布 (2天)
- 任务草稿
- 跳转集成
- 状态追踪

### Phase 4: 优化部署 (2天)
- TXT 导出
- 错误处理
- 部署上线

**总计**: 9天完成 MVP

## 未来优化

- PDF 导出
- 预算图表可视化
- 报告搜索筛选
- 多语言支持
- 报告分享功能
- 对比报告功能
